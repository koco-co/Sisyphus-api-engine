# é‡è¯•ä¸ç­‰å¾…

> å­¦ä¹ å¦‚ä½•å¤„ç†ä¸ç¨³å®šçš„ API è°ƒç”¨å’Œç­‰å¾…åœºæ™¯ã€‚

---

## ğŸ“– æ¦‚è¿°

é‡è¯•æœºåˆ¶ç”¨äºå¤„ç†ç½‘ç»œæŠ–åŠ¨æˆ–ä¸´æ—¶å¤±è´¥ï¼›ç­‰å¾…æœºåˆ¶ç”¨äºå¤„ç†å¼‚æ­¥ä»»åŠ¡æˆ–éœ€è¦å»¶è¿Ÿçš„åœºæ™¯ã€‚

---

## âš™ï¸ YAML å…³é”®å­—å‚è€ƒ

### é‡è¯•é…ç½®

| å…³é”®å­— | ç±»å‹ | æè¿° |
|-------|------|------|
| retry_times | number | é‡è¯•æ¬¡æ•° |
| retry_policy | object | é‡è¯•ç­–ç•¥ |
| retry_policy.max_attempts | number | æœ€å¤§å°è¯•æ¬¡æ•° |
| retry_policy.strategy | string | ç­–ç•¥ï¼šfixed/exponential |
| retry_policy.base_delay | number | åŸºç¡€å»¶è¿Ÿï¼ˆç§’ï¼‰ |

### ç­‰å¾…é…ç½®

| å…³é”®å­— | ç±»å‹ | æè¿° |
|-------|------|------|
| type | wait | æ­¥éª¤ç±»å‹ |
| seconds | number | å›ºå®šç­‰å¾…ç§’æ•° |
| condition | string | ç­‰å¾…æ¡ä»¶è¡¨è¾¾å¼ |
| interval | number | æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰ |
| max_wait | number | æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰ |

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šç®€å•é‡è¯•

```yaml
- name: "å¸¦é‡è¯•çš„è¯·æ±‚"
  method: GET
  url: "${base_url}/unstable-api"
  timeout: 10
  retry_times: 3
```

### ç¤ºä¾‹2ï¼šé‡è¯•ç­–ç•¥

```yaml
- name: "æŒ‡æ•°é€€é¿é‡è¯•"
  method: POST
  url: "${base_url}/api"
  retry_policy:
    max_attempts: 5
    strategy: exponential
    base_delay: 1.0
    max_delay: 30.0
```

### ç¤ºä¾‹3ï¼šå›ºå®šç­‰å¾…

```yaml
- name: "ç­‰å¾…3ç§’"
  type: wait
  seconds: 3
```

### ç¤ºä¾‹4ï¼šæ¡ä»¶ç­‰å¾…

```yaml
- name: "ç­‰å¾…ä»»åŠ¡å®Œæˆ"
  type: wait
  condition: "${task_status} == 'completed'"
  interval: 2
  max_wait: 60
```

---

## ğŸ”— ç›¸å…³èµ„æº

- [ä¸Šä¸€ç« ï¼šæµç¨‹æ§åˆ¶](./06_æµç¨‹æ§åˆ¶.md)
- [ä¸‹ä¸€ç« ï¼šå¾ªç¯æ§åˆ¶](./08_å¾ªç¯æ§åˆ¶.md)
