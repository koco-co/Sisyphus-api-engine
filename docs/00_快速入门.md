# å¿«é€Ÿå…¥é—¨

> æœ¬ç« èŠ‚å¸®åŠ©ä½ å¿«é€Ÿäº†è§£ Sisyphus API Engineï¼Œå¹¶è¿è¡Œç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚

---

## ğŸ“– æ¦‚è¿°

Sisyphus API Engine æ˜¯ä¸€ä¸ªåŸºäº YAML å£°æ˜å¼è¯­æ³•çš„ API è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ã€‚å®ƒå…è®¸ä½ é€šè¿‡ç¼–å†™ç®€å•çš„ YAML é…ç½®æ–‡ä»¶æ¥å®šä¹‰å’Œæ‰§è¡Œ API æµ‹è¯•ç”¨ä¾‹ï¼Œæ— éœ€ç¼–å†™å¤æ‚çš„ä»£ç ã€‚

æ¡†æ¶çš„æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯"é…ç½®å³æµ‹è¯•"â€”â€”ä½ åªéœ€è¦æè¿°æµ‹è¯•æ­¥éª¤å’Œé¢„æœŸç»“æœï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨æ‰§è¡Œè¯·æ±‚ã€éªŒè¯å“åº”ã€æå–å˜é‡å¹¶ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€‚

---

## ğŸ¯ å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬ç« åï¼Œä½ å°†èƒ½å¤Ÿï¼š
- å®‰è£…å’Œé…ç½® Sisyphus API Engine
- ç†è§£ YAML æµ‹è¯•ç”¨ä¾‹çš„åŸºæœ¬ç»“æ„
- ç¼–å†™å¹¶è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª API æµ‹è¯•

---

## ğŸ“š æ ¸å¿ƒæ¦‚å¿µ

### æµ‹è¯•ç”¨ä¾‹ç»“æ„

ä¸€ä¸ªå®Œæ•´çš„ YAML æµ‹è¯•ç”¨ä¾‹åŒ…å«ä»¥ä¸‹åŸºæœ¬å…ƒç´ ï¼š

```yaml
name: "æµ‹è¯•ç”¨ä¾‹åç§°"          # å¿…å¡«ï¼šæµ‹è¯•ç”¨ä¾‹åç§°
description: "æµ‹è¯•æè¿°"       # å¯é€‰ï¼šæµ‹è¯•ç”¨ä¾‹æè¿°
config:                       # å¯é€‰ï¼šå…¨å±€é…ç½®
  timeout: 30
  profiles:
    prod:
      base_url: "https://api.example.com"
steps:                        # å¿…å¡«ï¼šæµ‹è¯•æ­¥éª¤åˆ—è¡¨
  - name: "æ­¥éª¤åç§°"
    type: request
    method: GET
    url: "${config.profiles.prod.base_url}/api"
```

### è¿è¡Œæ–¹å¼

Sisyphus æä¾›å‘½ä»¤è¡Œå·¥å…·æ‰§è¡Œæµ‹è¯•ï¼š

```bash
# è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
sisyphus --cases examples/01_HTTPè¯·æ±‚æ–¹æ³•.yaml

# è¿è¡Œç›®å½•ä¸‹æ‰€æœ‰æµ‹è¯•
sisyphus --cases examples/

# æŒ‡å®šç¯å¢ƒé…ç½®
sisyphus --cases examples/test.yaml --profile dev
```

---

## âš™ï¸ YAML å…³é”®å­—å‚è€ƒ

| å…³é”®å­— | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° |
|-------|------|------|--------|------|
| name | string | âœ… | - | æµ‹è¯•ç”¨ä¾‹åç§° |
| description | string | âŒ | "" | æµ‹è¯•ç”¨ä¾‹æè¿° |
| config | object | âŒ | {} | å…¨å±€é…ç½®å¯¹è±¡ |
| steps | array | âœ… | - | æµ‹è¯•æ­¥éª¤åˆ—è¡¨ |
| tags | array | âŒ | [] | æµ‹è¯•ç”¨ä¾‹æ ‡ç­¾ |
| enabled | boolean | âŒ | true | æ˜¯å¦å¯ç”¨æ­¤æµ‹è¯• |

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šæœ€ç®€å•çš„æµ‹è¯•ç”¨ä¾‹

```yaml
name: "Hello API"
steps:
  - name: "è·å–é¦–é¡µ"
    method: GET
    url: "https://httpbin.org/get"
    validations:
      - type: status_code
        path: "$.status_code"
        expect: "200"
```

### ç¤ºä¾‹2ï¼šå¸¦é…ç½®çš„æµ‹è¯•ç”¨ä¾‹

```yaml
name: "å¸¦é…ç½®çš„æµ‹è¯•"
config:
  timeout: 30
  profiles:
    prod:
      base_url: "https://httpbin.org"
  active_profile: "prod"

steps:
  - name: "ä½¿ç”¨é…ç½®ä¸­çš„URL"
    method: GET
    url: "${config.profiles.prod.base_url}/get"
    validations:
      - type: status_code
        path: "$.status_code"
        expect: "200"
```

### ç¤ºä¾‹3ï¼šå¸¦å˜é‡æå–çš„æµ‹è¯•

```yaml
name: "å˜é‡æå–ç¤ºä¾‹"
steps:
  - name: "å‘é€è¯·æ±‚å¹¶æå–æ•°æ®"
    method: GET
    url: "https://httpbin.org/uuid"
    extractors:
      - name: uuid_value
        type: jsonpath
        path: "$.uuid"
    validations:
      - type: status_code
        path: "$.status_code"
        expect: "200"

  - name: "ä½¿ç”¨æå–çš„å˜é‡"
    method: POST
    url: "https://httpbin.org/post"
    body:
      extracted_uuid: "${uuid_value}"
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **YAML æ ¼å¼æ•æ„Ÿ**ï¼šä½¿ç”¨ç©ºæ ¼ç¼©è¿›ï¼ˆä¸è¦ç”¨ Tabï¼‰ï¼Œæ ‡å‡†ç¼©è¿›ä¸º 2 ä¸ªç©ºæ ¼
2. **ç¼–ç æ ¼å¼**ï¼šæµ‹è¯•æ–‡ä»¶å¿…é¡»ä½¿ç”¨ UTF-8 ç¼–ç 
3. **æ–‡ä»¶æ‰©å±•å**ï¼šæ¨èä½¿ç”¨ `.yaml` æˆ– `.yml` æ‰©å±•å

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•å®‰è£… Sisyphusï¼Ÿ

```bash
pip install sisyphus-api-engine
```

### Q2: æµ‹è¯•æ–‡ä»¶æ”¾åœ¨å“ªé‡Œï¼Ÿ

å»ºè®®åˆ›å»º `examples/` ç›®å½•å­˜æ”¾æµ‹è¯•æ–‡ä»¶ï¼ŒæŒ‰åŠŸèƒ½åˆ†ç±»å‘½åã€‚

---

## ğŸ”— ç›¸å…³èµ„æº

- [ä¸‹ä¸€ç« ï¼šHTTPè¯·æ±‚](./01_HTTPè¯·æ±‚.md)
- [ç¤ºä¾‹æ–‡ä»¶](../examples/01_HTTPè¯·æ±‚æ–¹æ³•.yaml)
