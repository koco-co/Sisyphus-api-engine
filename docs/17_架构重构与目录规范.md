# 架构重构与目录规范

## 目标

本规范用于保持项目结构稳定，避免前后端/测试在环境配置与文档上继续分散。

## 统一后的目录约定

```text
Sisyphus-api-engine/
├── .sisyphus/
│   └── config.yaml          # 唯一共享环境配置入口
├── apirun/                  # 引擎源码
├── tests/                   # 自动化测试
├── examples/                # YAML 示例（唯一示例入口）
├── docs/                    # 统一文档入口
└── scripts/                 # 辅助脚本
```

## 关键约束

1. 环境配置统一放在 `.sisyphus/config.yaml`，不再新增平行 `config/*.yaml` 目录。
2. 示例统一放在 `examples/` 根目录，不再维护 `examples/yaml/` 这类重复副本。
3. 文档统一放在 `docs/`，避免在测试目录、示例目录中重复维护同类说明。
4. 运行产物（如 `allure-results/`、`dist/`、`logs/`、缓存文件）不得入库。

## 本次整理项

1. 将 `config/global_config.yaml` 迁移至 `.sisyphus/config.yaml`。
2. 删除重复示例目录 `examples/yaml/`。
3. 清理本地产物与缓存目录（测试报告、构建产物、缓存、临时文件）。
4. 抽取公共 YAML include 加载逻辑：`apirun/utils/yaml_loader.py`，统一 parser/validator 行为。

## 开发与回归基线

```bash
.venv/bin/ruff check .
.venv/bin/pytest -q
```

若新增功能涉及目录/配置变更，需同步更新本文件与 `README.md` 的结构说明。
