---
description: 自动同步测试资产与文档 (修复Bug/新增/增强功能后调用)
---

# 1. 变更感知与意图分析
- 分析 `git diff` 或对话上下文，将改动精确归类为：**[新增功能]**、**[增强/丰富既有功能]**（如扩展 JsonPath 表达式支持）或 **[修复 Bug]**。
- 检索关联的核心代码及其对应的正式测试文件（YAML 案例与单元测试脚本）。

# 2. 测试资产差异化同步
- **针对 [新增功能]**：
    - 在对应模块目录下创建全新的 YAML 测试案例及配套单元测试脚本。
- **针对 [增强/丰富既有功能]**：
    - **禁止新建文件**。在现有的相关 YAML 案例或单元测试中，直接**叠加/追加**新的测试场景（Test Cases）或断言逻辑，确保用例集内聚。
- **针对 [修复 Bug]**：
    - 在既有用例中补充能够复现该 Bug 的边界场景，防止回归，并同步更新断言逻辑。

# 3. 结构重构与位置优化
- 检查所有测试文件存放路径是否符合项目模块划分规范。
- **逻辑对齐**：若发现位置混乱（如模块错位、命名不一），自动执行文件搬迁或重命名，确保测试目录结构垂直于业务逻辑。

# 4. 环境清理 (Cleanup)
- **扫描并强制删除**：清理修改过程中产生的任务列表、执行报告、临时调试脚本（如 `tmp_*`）、缓存文件及非生产级的临时测试数据。
- 确保工作区仅保留标准化测试代码。

# 5. 全局文档更新
- **README.md**：更新功能矩阵、快速开始指引或技术栈变更。
- **docs/ 目录**：同步更新协议规范文档、接口逻辑定义及版本变更日志。
- 确保文档内的代码 Snippets 与当前最新实现完全匹配。

# 6. 最终自检
- 验证文档内引用、链接的准确性。
- 简要汇总：1. 资产同步类型（新增/叠加） 2. 清理的冗余项 3. 文档更新核心点。