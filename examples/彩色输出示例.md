# 彩色输出功能说明

Sisyphus API Engine 现在支持美观的彩色命令行输出，带有 Emoji 图标和多语言支持。

## 功能特性

### 🎨 彩色输出
- 自动检测终端颜色支持
- 使用 ANSI 颜色码美化输出
- 不同状态使用不同颜色：
  - ✅ 成功（绿色）
  - ❌ 失败（红色）
  - ⏭️ 跳过（黄色）
  - ⚠️ 警告（黄色）

### 😀 Emoji 支持
- 丰富的 Emoji 图标增强可读性
- 自动检测终端支持
- Windows 系统自动禁用不兼容的 Emoji

### 🌍 多语言支持
- 中文（默认）
- 英文
- 所有输出文本支持双语切换

## 使用方法

### 基本用法

```bash
# 默认中文模式（带颜色和 emoji）
sisyphus-api-engine --cases test.yaml

# 英文模式
sisyphus-api-engine --lang en --cases test.yaml

# 禁用颜色
sisyphus-api-engine --no-color --cases test.yaml

# 禁用 emoji
sisyphus-api-engine --no-emoji --cases test.yaml

# 完全禁用样式（适合脚本）
sisyphus-api-engine --no-color --no-emoji --cases test.yaml
```

### 输出示例

#### 中文模式（默认）

```
ℹ️ 找到 1 个测试用例文件

🚀 JSONPath 函数功能演示
   演示增强的 JSONPath 表达式支持各种函数调用
   步骤数: 14

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  状态: ✅ PASSED    耗时: 18.29s

  统计:
    📊 总计: 14
    ✅ 通过: 14
    ❌ 失败: 0
    ⏭️ 跳过: 0
    🎯 通过率: 100.0%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

#### 英文模式

```bash
sisyphus-api-engine --lang en --cases test.yaml
```

```
ℹ️ Found 1 test case file(s)

🚀 JSONPath Function Demo
   Demonstrates enhanced JSONPath expression support
   Steps: 14

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  Status: ✅ PASSED    Duration: 18.29s

  Statistics:
    📊 Total: 14
    ✅ Passed: 14
    ❌ Failed: 0
    ⏭️ Skipped: 0
    🎯 Pass Rate: 100.0%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 详细模式（-v）

添加 `-v` 参数可以查看每个步骤的详细信息：

```bash
sisyphus-api-engine --cases test.yaml -v
```

输出包括：
- 步骤名称和状态
- 执行耗时
- 性能分析（DNS、TCP、TLS、Server 时间）
- 数据大小

#### 示例输出

```
步骤详情:
  ✅ 创建测试数据
     耗时: 982.16ms
     详情: DNS: 98.22ms | TCP: 98.22ms | TLS: 147.32ms | Server: 392.86ms
     大小: 1788 bytes (1.75 KB)

  ✅ 验证数组长度和通配符
     耗时: 1010.57ms
     详情: DNS: 100.00ms | TCP: 100.00ms | TLS: 150.00ms | Server: 404.23ms
     大小: 1879 bytes (1.83 KB)

  ❌ 失败的步骤示例
     耗时: 523.45ms
     错误: Validation failed: 期望值与实际值不匹配
```

### 排版优化

彩色输出经过精心优化，具有以下特点：

1. **Emoji 前置显示** - 统计项中的 emoji 放在标签前，更加醒目
   - 📊 总计
   - ✅ 通过
   - ❌ 失败
   - ⏭️ 跳过
   - 🎯 通过率

2. **明亮易读** - 步骤详情中的耗时、详情、大小使用正常颜色（不再暗淡）

3. **标题居中** - Emoji 与步骤标题间保持一个空格，视觉更整洁

4. **无重复图标** - 失败步骤的错误信息不再重复显示 emoji（已在标题显示）

## 命令行参数

| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `--lang` | en/zh | zh | CLI 输出语言（中文/英文） |
| `--no-color` | flag | False | 禁用彩色输出 |
| `--no-emoji` | flag | False | 禁用 Emoji 图标 |

## 环境变量

支持以下环境变量控制输出：

- `NO_COLOR`：设置任何值都会禁用颜色
- `TERM=dumb`：自动禁用颜色

## 终端兼容性

### 完全支持
- macOS Terminal
- Linux 终端（GNOME Terminal, Konsole, etc.）
- Windows Terminal (Windows 10+)
- VS Code 集成终端
- iTerm2

### 部分支持
-旧版 Windows 命令提示符（自动禁用 emoji）

### 自动检测
- 自动检测终端是否支持颜色
- 自动检测终端是否支持 emoji
- 不支持时自动降级到纯文本

## 脚本集成

对于 CI/CD 脚本，建议使用：

```bash
# 完全禁用样式（适合日志文件）
sisyphus-api-engine --no-color --no-emoji --cases test.yaml

# 或设置环境变量
export NO_COLOR=1
sisyphus-api-engine --cases test.yaml
```

## 颜色方案

不同状态使用的颜色：

| 状态 | 颜色 | RGB |
|------|------|-----|
| 成功 | 绿色 | #00FF00 |
| 失败 | 红色 | #FF0000 |
| 警告 | 黄色 | #FFFF00 |
| 信息 | 青色 | #00FFFF |
| 高亮 | 亮黄色 | #FFFF00 |
| 标题 | 粗体白色 | #FFFFFF |

## 反馈与建议

如果您有任何问题或建议，欢迎提 issue：
https://github.com/koco-co/Sisyphus-api-engine/issues
